# æ€è·¯
```java
class Solution {

Â  Â  List<List<String>> res = new ArrayList<>();

Â  Â  public List<List<String>> partition(String s) {

Â  Â  Â  Â  // å¦‚æœå­—ç¬¦ä¸²ä¸ºç©ºï¼Œç›´æ¥è¿”å›res

Â  Â  Â  Â  if(s == null || s.length() == 0){

Â  Â  Â  Â  Â  Â  return res;

Â  Â  Â  Â  }

Â  Â  Â  Â  backtrack(s, 0, new ArrayList<>(), new StringBuilder());

Â  Â  Â  Â  return res;

Â  Â  }

Â  Â  public void backtrack(String s,int index,List<String> list, StringBuilder path){

Â  Â  Â  Â  if(index == s.length()){

Â  Â  Â  Â  Â  Â  if(huiwen(path.toString()) && path != null && path.length() != 0){

Â  Â  Â  Â  Â  Â  Â  Â  list.add(path.toString());

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  }

Â  Â  Â  Â  path.append(s.charAt(index));

Â  Â  Â  Â  backtrack(s, index + 1, list, path);

Â  Â  Â  Â  path.deleteCharAt(path.length() - 1);

Â  Â  Â  Â  backtrack(s, index + 1, list, path);

Â  Â  Â  Â  res.add(new ArrayList<>(list));

Â  Â  }

Â  Â  public boolean huiwen(String str){

Â  Â  Â  Â  if(str == null || str.length() == 0){

Â  Â  Â  Â  Â  Â  return false;

Â  Â  Â  Â  }

Â  Â  Â  Â  int i = 0;

Â  Â  Â  Â  int j = str.length() - 1;

Â  Â  Â  Â  while(i < j){

Â  Â  Â  Â  Â  Â  if(str.charAt(i) != str.charAt(j)){

Â  Â  Â  Â  Â  Â  Â  Â  return false;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  i ++;

Â  Â  Â  Â  Â  Â  j --;

Â  Â  Â  Â  }

Â  Â  Â  Â  return true;

Â  Â  }

}
```

ä¼˜åŒ–ä¹‹åçš„ä»£ç 
1. **åˆ‡å‰²ç‚¹çš„æ··æ·†**ï¼šé¢˜ç›®è¦æ±‚çš„æ˜¯â€œåˆ†å‰²â€å­—ç¬¦ä¸²ï¼Œæ„å‘³ç€æˆ‘ä»¬è¦æŠŠåŸå­—ç¬¦ä¸²åˆ‡æˆ**è¿ç»­ä¸é‡å **çš„å‡ æ®µã€‚ä½ çš„ä»£ç é€šè¿‡ `path.append(s.charAt(index))` å’Œ `backtrack(s, index + 1, ...)` æ¥æ„å»ºè·¯å¾„ï¼Œè¿™å®é™…ä¸Šæ˜¯åœ¨ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„**å­åºåˆ—**ï¼ˆå¯ä»¥ä¸è¿ç»­ï¼‰ï¼Œè€Œä¸æ˜¯**åˆ‡å‰²**ã€‚ä¾‹å¦‚ï¼Œå¯¹äº "aab"ï¼Œä½ çš„ä»£ç å¯èƒ½ä¼šå°è¯•ç”Ÿæˆåƒ "ab" è¿™æ ·çš„å­åºåˆ—ï¼Œä½†è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„â€œåˆ†å‰²â€ã€‚
    
2. **å›æº¯é€»è¾‘çš„é”™ä½**ï¼šåœ¨ä½ çš„ `backtrack` å‡½æ•°ä¸­ï¼Œ`res.add(new ArrayList<>(list));` è¿™è¡Œä»£ç è¢«æ”¾åœ¨äº†å¾ªç¯ä¹‹å¤–ï¼Œè¿™æ„å‘³ç€æ— è®ºé€’å½’çš„ç»“æœå¦‚ä½•ï¼Œå®ƒéƒ½ä¼šè¢«æ‰§è¡Œï¼Œå¯¼è‡´ç»“æœé›†ä¸­æ·»åŠ äº†å¤§é‡ä¸å®Œæ•´çš„ã€é‡å¤çš„ä¸­é—´çŠ¶æ€ã€‚
    
3. **ç»ˆæ­¢æ¡ä»¶çš„åˆ¤æ–­**ï¼šåœ¨ `index == s.length()` æ—¶ï¼Œä½ åˆ¤æ–­çš„æ˜¯ `path` æ˜¯å¦ä¸ºå›æ–‡ã€‚ä½†æ­¤æ—¶çš„ `path` åªæ˜¯ä¼—å¤šå­åºåˆ—ä¸­çš„ä¸€ä¸ªï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„â€œåˆ†å‰²æ–¹æ¡ˆâ€ã€‚

```java
import java.util.ArrayList;
import java.util.List;

class Solution {

    List<List<String>> result = new ArrayList<>();
    List<String> path = new ArrayList<>();

    public List<List<String>> partition(String s) {
        if (s == null || s.length() == 0) {
            return result;
        }
        backtrack(s, 0);
        return result;
    }

    /**
     * å›æº¯å‡½æ•°
     * @param s          åŸå§‹å­—ç¬¦ä¸²
     * @param startIndex å½“å‰åˆ‡å‰²çš„èµ·å§‹ä½ç½®
     */
    private void backtrack(String s, int startIndex) {
        // é€’å½’ç»ˆæ­¢æ¡ä»¶ï¼šå¦‚æœèµ·å§‹ä½ç½®å·²ç»è¶Šè¿‡å­—ç¬¦ä¸²æœ«å°¾ï¼Œè¯´æ˜æ‰¾åˆ°äº†ä¸€ç»„å®Œæ•´çš„åˆ†å‰²æ–¹æ¡ˆ
        if (startIndex >= s.length()) {
            result.add(new ArrayList<>(path));
            return;
        }

        // éå†æ‰€æœ‰å¯èƒ½çš„åˆ‡å‰²ç‚¹
        for (int i = startIndex; i < s.length(); i++) {
            // åˆ¤æ–­ s[startIndex...i] æ˜¯å¦æ˜¯å›æ–‡
            if (isPalindrome(s, startIndex, i)) {
                // å¦‚æœæ˜¯ï¼Œåˆ™è¿™æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„åˆ‡å‰²é€‰æ‹©
                
                // 1. åšé€‰æ‹©ï¼šå°†è¿™ä¸ªå›æ–‡å­ä¸²åŠ å…¥è·¯å¾„
                path.add(s.substring(startIndex, i + 1));
                
                // 2. æ¢ç´¢ï¼šä» i + 1 å¼€å§‹ï¼Œç»§ç»­å¯¹å‰©ä½™éƒ¨åˆ†è¿›è¡Œåˆ‡å‰²
                backtrack(s, i + 1);
                
                // 3. æ’¤é”€é€‰æ‹©ï¼ˆå›æº¯ï¼‰ï¼šå°†åˆšåŠ å…¥çš„å­ä¸²ç§»é™¤ï¼Œä¸ºå°è¯•å…¶ä»–åˆ‡å‰²æ–¹æ¡ˆåšå‡†å¤‡
                path.remove(path.size() - 1);
            }
        }
    }

    /**
     * åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²çš„å­ä¸²æ˜¯å¦æ˜¯å›æ–‡
     * @param s     åŸå§‹å­—ç¬¦ä¸²
     * @param start å­ä¸²çš„èµ·å§‹ç´¢å¼•
     * @param end   å­ä¸²çš„ç»“æŸç´¢å¼•
     * @return å¦‚æœæ˜¯å›æ–‡ï¼Œè¿”å›trueï¼Œå¦åˆ™è¿”å›false
     */
    private boolean isPalindrome(String s, int start, int end) {
        while (start < end) {
            if (s.charAt(start) != s.charAt(end)) {
                return false;
            }
            start++;
            end--;
        }
        return true;
    }
}
```

# æç¤ºè¯
```txt
# è§’è‰²å’Œç›®æ ‡

ä½ å¥½ï¼Œè¯·ä½ æ‰®æ¼”ä¸€ä½èµ„æ·±çš„Javaå¼€å‘å·¥ç¨‹å¸ˆï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä½æ“…é•¿è®²è§£ç®—æ³•çš„å¯¼å¸ˆã€‚

æˆ‘çš„ç›®æ ‡æ˜¯å½»åº•ç†è§£åŠ›æ‰£131. åˆ†å‰²å›æ–‡ä¸²çš„è¿™é“é¢˜ç›®ï¼Œå¹¶å­¦ä¹ è§£å†³è¿™ç±»é—®é¢˜çš„é€šç”¨æ€è·¯ã€‚è¯·ä½ ä»¥ä¸€ä¸ªåˆçº§Javaç¨‹åºå‘˜èƒ½å®Œå…¨å¬æ‡‚çš„æ–¹å¼ï¼Œä¸ºæˆ‘æä¾›è¯¦ç»†çš„æŒ‡å¯¼ã€‚

# é¢˜ç›®

131. åˆ†å‰²å›æ–‡ä¸²ï¼Œ ç†è§£é¢˜ç›®å«ä¹‰ï¼Œæ ·ä¾‹è¾“å…¥è¾“å‡º

# æˆ‘çš„æ€è·¯

è¯·é˜…è¯»æˆ‘çš„ä»£ç ï¼Œæ€»ç»“æˆ‘çš„æ€è·¯
class Solution {

Â  Â  List<List<String>> res = new ArrayList<>();

Â  Â  public List<List<String>> partition(String s) {

Â  Â  Â  Â  // å¦‚æœå­—ç¬¦ä¸²ä¸ºç©ºï¼Œç›´æ¥è¿”å›res

Â  Â  Â  Â  if(s == null || s.length() == 0){

Â  Â  Â  Â  Â  Â  return res;

Â  Â  Â  Â  }

Â  Â  Â  Â  backtrack(s, 0, new ArrayList<>(), new StringBuilder());

Â  Â  Â  Â  return res;

Â  Â  }

Â  Â  public void backtrack(String s,int index,List<String> list, StringBuilder path){

Â  Â  Â  Â  if(index == s.length()){

Â  Â  Â  Â  Â  Â  if(huiwen(path.toString()) && path != null && path.length() != 0){

Â  Â  Â  Â  Â  Â  Â  Â  list.add(path.toString());

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  }

Â  Â  Â  Â  path.append(s.charAt(index));

Â  Â  Â  Â  backtrack(s, index + 1, list, path);

Â  Â  Â  Â  path.deleteCharAt(path.length() - 1);

Â  Â  Â  Â  backtrack(s, index + 1, list, path);

Â  Â  Â  Â  res.add(new ArrayList<>(list));

Â  Â  }

Â  Â  public boolean huiwen(String str){

Â  Â  Â  Â  if(str == null || str.length() == 0){

Â  Â  Â  Â  Â  Â  return false;

Â  Â  Â  Â  }

Â  Â  Â  Â  int i = 0;

Â  Â  Â  Â  int j = str.length() - 1;

Â  Â  Â  Â  while(i < j){

Â  Â  Â  Â  Â  Â  if(str.charAt(i) != str.charAt(j)){

Â  Â  Â  Â  Â  Â  Â  Â  return false;

Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  i ++;

Â  Â  Â  Â  Â  Â  j --;

Â  Â  Â  Â  }

Â  Â  Â  Â  return true;

Â  Â  }

}
# æˆ‘çš„å›°æƒ‘

æˆ‘ç°åœ¨çš„ä»£ç åªèƒ½é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹ï¼Œåˆ†æé—®é¢˜çš„åŸå› 


# æˆ‘å¸Œæœ›çš„è¾“å‡º

è¯·ä½ æ ¹æ®ä»¥ä¸Šä¿¡æ¯ï¼Œä¸ºæˆ‘æä¾›ä¸€ä»½è¯¦ç»†çš„é¢˜è§£ï¼Œå¹¶æ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š

1. æ€è·¯è®²è§£ï¼šé¦–å…ˆï¼Œè¯·ç¡®è®¤æˆ‘çš„æ€è·¯æ˜¯å¦æ­£ç¡®ã€‚ç„¶åï¼Œç”¨é€šä¿—æ˜“æ‡‚çš„è¯­è¨€ï¼Œåˆ†æ­¥éª¤è¯¦ç»†è®²è§£æ­£ç¡®çš„è§£é¢˜æ€è·¯ï¼Œç‰¹åˆ«æ˜¯é’ˆå¯¹æˆ‘çš„å›°æƒ‘ç‚¹è¿›è¡Œè§£ç­”ã€‚

2. æ•°æ®ç»“æ„é€‰æ‹©ï¼šé€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„ï¼Œå¹¶è®²è§£ä¸ºä»€ä¹ˆä½¿ç”¨è¯¥æ•°æ®ç»“æ„

3. Javaä»£ç å®ç°ï¼šæä¾›ä¸€ä»½å®Œæ•´ã€å¯è¿è¡Œçš„Javaä»£ç ã€‚Â 

4. ä»£ç æ³¨é‡Šï¼š è¯·åœ¨ä»£ç çš„å…³é”®éƒ¨åˆ†åŠ ä¸Šè¯¦ç»†çš„æ³¨é‡Šï¼Œè§£é‡Šè¿™è¡Œä»£ç ï¼ˆæˆ–ä»£ç å—ï¼‰çš„ä½œç”¨ï¼Œè®©æˆ‘èƒ½é€è¡Œç†è§£ã€‚Â 

5. å¤æ‚åº¦åˆ†æï¼š åœ¨ä»£ç ä¹‹åï¼Œè¯·åˆ†æè¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ã€‚

6. ç»™å‡ºleecodeç›¸åŒæ€è·¯çš„é¢˜ç›®

7. ç»™å‡ºçš„ç¬”è®°ç¬¦åˆobsidianæ ¼å¼, å¹¶ç¾åŒ–æ ¼å¼
```
# é¢˜è§£
ä½ å¥½ï¼å¾ˆé«˜å…´èƒ½ä»¥Javaå¼€å‘å·¥ç¨‹å¸ˆå’Œç®—æ³•å¯¼å¸ˆçš„èº«ä»½ï¼Œå’Œä½ ä¸€èµ·åˆ†æè¿™é“â€œåˆ†å‰²å›æ–‡ä¸²â€çš„é—®é¢˜ã€‚ä½ å·²ç»å‹‡æ•¢åœ°å†™å‡ºäº†è‡ªå·±çš„å›æº¯ä»£ç ï¼Œè¿™æ˜¯éå¸¸æ£’çš„ç¬¬ä¸€æ­¥ï¼Œè¯´æ˜ä½ å¯¹å›æº¯çš„åŸºæœ¬å½¢å¼æœ‰äº†ä¸€å®šçš„ç†è§£ã€‚

ä½ çš„ä»£ç æ²¡èƒ½é€šè¿‡ï¼Œæ˜¯å› ä¸ºå¯¹å›æº¯â€œ**åœ¨ä»€ä¹ˆåœ°æ–¹åšé€‰æ‹©**â€ä»¥åŠâ€œ**å¦‚ä½•åˆ‡å‰²**â€çš„ç†è§£ä¸Šå‡ºç°äº†ä¸€ç‚¹åå·®ã€‚åˆ«æ‹…å¿ƒï¼Œè¿™æ˜¯åˆå­¦å›æº¯æ—¶éå¸¸å¸¸è§çš„å›°æƒ‘ï¼Œæˆ‘ä»¬æ¥ä¸€èµ·æŠŠå®ƒç†é¡ºã€‚

---

# LeetCode 131. åˆ†å‰²å›æ–‡ä¸² - æ·±åº¦è§£æä¸å›æº¯æ€æƒ³

## 1. æ€è·¯è®²è§£

### a. ä½ çš„ä»£ç æ€è·¯åˆ†æä¸é—®é¢˜å®šä½

æˆ‘é˜…è¯»äº†ä½ çš„ä»£ç ï¼Œå¯ä»¥æ€»ç»“å‡ºä½ çš„æ€è·¯æ˜¯ï¼š

> å°è¯•å¯¹å­—ç¬¦ä¸²ä¸­çš„æ¯ä¸ªå­—ç¬¦ï¼Œåšä¸¤ç§é€‰æ‹©ï¼šè¦ä¹ˆ**åŠ å…¥**å½“å‰çš„å­ä¸² `path`ï¼Œè¦ä¹ˆ**ä¸åŠ å…¥**ã€‚é€šè¿‡è¿™ç§æ–¹å¼æ¥æ„å»ºæ‰€æœ‰å¯èƒ½çš„å­ä¸²ç»„åˆï¼Œæœ€åå†åˆ¤æ–­è¿™äº›å­ä¸²æ˜¯å¦æ˜¯å›æ–‡ã€‚

è¿™ä¸ªæ€è·¯å±•ç°äº†å›æº¯çš„æ€æƒ³ï¼Œä½†å®ƒæ›´åƒæ˜¯è§£å†³â€œ**å­åºåˆ—**â€é—®é¢˜çš„æ¨¡æ¿ï¼Œè€Œä¸æ˜¯â€œ**åˆ‡å‰²**â€é—®é¢˜çš„æ¨¡æ¿ã€‚

**é—®é¢˜å‡ºåœ¨å“ªé‡Œï¼Ÿ**

1. **åˆ‡å‰²ç‚¹çš„æ··æ·†**ï¼šé¢˜ç›®è¦æ±‚çš„æ˜¯â€œåˆ†å‰²â€å­—ç¬¦ä¸²ï¼Œæ„å‘³ç€æˆ‘ä»¬è¦æŠŠåŸå­—ç¬¦ä¸²åˆ‡æˆ**è¿ç»­ä¸é‡å **çš„å‡ æ®µã€‚ä½ çš„ä»£ç é€šè¿‡ `path.append(s.charAt(index))` å’Œ `backtrack(s, index + 1, ...)` æ¥æ„å»ºè·¯å¾„ï¼Œè¿™å®é™…ä¸Šæ˜¯åœ¨ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„**å­åºåˆ—**ï¼ˆå¯ä»¥ä¸è¿ç»­ï¼‰ï¼Œè€Œä¸æ˜¯**åˆ‡å‰²**ã€‚ä¾‹å¦‚ï¼Œå¯¹äº "aab"ï¼Œä½ çš„ä»£ç å¯èƒ½ä¼šå°è¯•ç”Ÿæˆåƒ "ab" è¿™æ ·çš„å­åºåˆ—ï¼Œä½†è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„â€œåˆ†å‰²â€ã€‚
    
2. **å›æº¯é€»è¾‘çš„é”™ä½**ï¼šåœ¨ä½ çš„ `backtrack` å‡½æ•°ä¸­ï¼Œ`res.add(new ArrayList<>(list));` è¿™è¡Œä»£ç è¢«æ”¾åœ¨äº†å¾ªç¯ä¹‹å¤–ï¼Œè¿™æ„å‘³ç€æ— è®ºé€’å½’çš„ç»“æœå¦‚ä½•ï¼Œå®ƒéƒ½ä¼šè¢«æ‰§è¡Œï¼Œå¯¼è‡´ç»“æœé›†ä¸­æ·»åŠ äº†å¤§é‡ä¸å®Œæ•´çš„ã€é‡å¤çš„ä¸­é—´çŠ¶æ€ã€‚
    
3. **ç»ˆæ­¢æ¡ä»¶çš„åˆ¤æ–­**ï¼šåœ¨ `index == s.length()` æ—¶ï¼Œä½ åˆ¤æ–­çš„æ˜¯ `path` æ˜¯å¦ä¸ºå›æ–‡ã€‚ä½†æ­¤æ—¶çš„ `path` åªæ˜¯ä¼—å¤šå­åºåˆ—ä¸­çš„ä¸€ä¸ªï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„â€œåˆ†å‰²æ–¹æ¡ˆâ€ã€‚
    

### b. æ­£ç¡®çš„è§£é¢˜æ€è·¯ï¼šå›æº¯ + åˆ‡å‰²

è¿™é“é¢˜æ˜¯å›æº¯ç®—æ³•çš„ä¸€ä¸ªç»å…¸åº”ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªâ€œ**åˆ‡è›‹ç³•**â€çš„æ¸¸æˆã€‚

**æ ¸å¿ƒæ€æƒ³**ï¼š

> ä»å­—ç¬¦ä¸²çš„å¼€å¤´å¼€å§‹ï¼Œæˆ‘ä»¬æ‰‹é‡Œæ‹¿ç€ä¸€æŠŠåˆ€ï¼Œæ€è€ƒâ€œç¬¬ä¸€åˆ€å¯ä»¥åˆ‡åœ¨å“ªé‡Œï¼Ÿâ€ã€‚
> 
> - å¯ä»¥åˆ‡åœ¨ç¬¬1ä¸ªå­—ç¬¦åã€‚
>     
> - å¯ä»¥åˆ‡åœ¨ç¬¬2ä¸ªå­—ç¬¦åã€‚
>     
> - ...
>     
> - å¯ä»¥åˆ‡åœ¨ç¬¬nä¸ªå­—ç¬¦åã€‚
>     

å¯¹äºæ¯ä¸€æ¬¡å¯èƒ½çš„â€œåˆ‡æ³•â€ï¼Œæˆ‘ä»¬éƒ½éœ€è¦åˆ¤æ–­åˆ‡ä¸‹æ¥çš„è¿™ä¸€å°å—ï¼ˆå­ä¸²ï¼‰**æ˜¯å¦æ˜¯å›æ–‡ä¸²**ã€‚

- **å¦‚æœä¸æ˜¯å›æ–‡ä¸²**ï¼šé‚£è¿™ä¸€åˆ€å°±ç™½åˆ‡äº†ï¼Œè¿™ä¸ªæ–¹æ¡ˆè¡Œä¸é€šï¼Œæˆ‘ä»¬**å‰ªæ**ï¼Œä¸å†ç»§ç»­å¾€ä¸‹åˆ‡ã€‚
    
- **å¦‚æœæ˜¯å›æ–‡ä¸²**ï¼šå¤ªå¥½äº†ï¼æˆ‘ä»¬æ‰¾åˆ°äº†ä¸€ä¸ªæœ‰æ•ˆçš„åˆ†å‰²å—ã€‚æˆ‘ä»¬æŠŠå®ƒè®°å½•ä¸‹æ¥ï¼Œç„¶åå¯¹**å‰©ä¸‹çš„é‚£éƒ¨åˆ†å­—ç¬¦ä¸²**ï¼Œç”¨**å®Œå…¨ç›¸åŒçš„é€»è¾‘**å»ç»§ç»­åˆ‡åˆ†ã€‚
    

è¿™ä¸ªè¿‡ç¨‹ï¼Œå°±æ˜¯å…¸å‹çš„â€œ**å›æº¯**â€ã€‚

**å¯è§†åŒ–æ­¥éª¤ï¼ˆä»¥ "aab" ä¸ºä¾‹ï¼‰**

1. **ç«™åœ¨å¼€å¤´ (index=0)**ï¼š
    
    - **åˆ‡æ³•1**ï¼šåˆ‡ä¸‹å­ä¸² "a" (ä»ç´¢å¼•0åˆ°0)ã€‚
        
        - åˆ¤æ–­ "a" æ˜¯å›æ–‡å—ï¼Ÿ**æ˜¯**ã€‚
            
        - å¥½çš„ï¼ŒæŠŠ "a" åŠ å…¥å½“å‰è·¯å¾„ `path`ã€‚ç°åœ¨ `path = ["a"]`ã€‚
            
        - **å¯¹å‰©ä¸‹çš„ "ab" (ä»index=1å¼€å§‹) é‡å¤æ­¤è¿‡ç¨‹**ã€‚
            
            - **ç«™åœ¨ 'a' (index=1)**ï¼š
                
                - **åˆ‡æ³•1.1**ï¼šåˆ‡ä¸‹å­ä¸² "a" (ä»ç´¢å¼•1åˆ°1)ã€‚
                    
                    - åˆ¤æ–­ "a" æ˜¯å›æ–‡å—ï¼Ÿ**æ˜¯**ã€‚
                        
                    - `path` å˜ä¸º `["a", "a"]`ã€‚å¯¹å‰©ä¸‹çš„ "b" (ä»index=2å¼€å§‹) é‡å¤ã€‚
                        
                        - **ç«™åœ¨ 'b' (index=2)**ï¼š
                            
                            - **åˆ‡æ³•1.1.1**ï¼šåˆ‡ä¸‹ "b"ã€‚æ˜¯å›æ–‡ã€‚`path` å˜ä¸º `["a", "a", "b"]`ã€‚
                                
                            - å·²ç»åˆ‡åˆ°å­—ç¬¦ä¸²æœ«å°¾äº†ï¼è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ–¹æ¡ˆï¼Œ**è®°å½• `["a", "a", "b"]`**ã€‚
                                
                            - **å›æº¯**ï¼šä» `path` ä¸­ç§»é™¤ "b"ã€‚
                                
                    - **å›æº¯**ï¼šä» `path` ä¸­ç§»é™¤ "a"ã€‚
                        
                - **åˆ‡æ³•1.2**ï¼šåˆ‡ä¸‹å­ä¸² "ab" (ä»ç´¢å¼•1åˆ°2)ã€‚
                    
                    - åˆ¤æ–­ "ab" æ˜¯å›æ–‡å—ï¼Ÿ**å¦**ã€‚æ­¤è·¯ä¸é€šã€‚
                        
            - **å›æº¯**ï¼šä» `path` ä¸­ç§»é™¤ "a"ã€‚
                
    - **åˆ‡æ³•2**ï¼šåˆ‡ä¸‹å­ä¸² "aa" (ä»ç´¢å¼•0åˆ°1)ã€‚
        
        - åˆ¤æ–­ "aa" æ˜¯å›æ–‡å—ï¼Ÿ**æ˜¯**ã€‚
            
        - `path` å˜ä¸º `["aa"]`ã€‚å¯¹å‰©ä¸‹çš„ "b" (ä»index=2å¼€å§‹) é‡å¤ã€‚
            
            - **ç«™åœ¨ 'b' (index=2)**ï¼š
                
                - **åˆ‡æ³•2.1**ï¼šåˆ‡ä¸‹ "b"ã€‚æ˜¯å›æ–‡ã€‚`path` å˜ä¸º `["aa", "b"]`ã€‚
                    
                - åˆ‡åˆ°æœ«å°¾äº†ï¼**è®°å½• `["aa", "b"]`**ã€‚
                    
                - **å›æº¯**ï¼šç§»é™¤ "b"ã€‚
                    
        - **å›æº¯**ï¼šç§»é™¤ "aa"ã€‚
            
    - **åˆ‡æ³•3**ï¼šåˆ‡ä¸‹å­ä¸² "aab" (ä»ç´¢å¼•0åˆ°2)ã€‚
        
        - åˆ¤æ–­ "aab" æ˜¯å›æ–‡å—ï¼Ÿ**å¦**ã€‚æ­¤è·¯ä¸é€šã€‚
            
2. æ‰€æœ‰å¯èƒ½çš„åˆ‡æ³•éƒ½å·²å°è¯•ï¼Œç®—æ³•ç»“æŸã€‚æœ€ç»ˆå¾—åˆ°ä¸¤ä¸ªè§£ã€‚
    

---

## 2. æ•°æ®ç»“æ„é€‰æ‹©

- `List<List<String>> result`: ç”¨äºå­˜å‚¨æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„åˆ†å‰²æ–¹æ¡ˆã€‚
    
- `List<String> path` (æˆ– `Deque<String>`): ç”¨äºå­˜å‚¨åœ¨ä¸€æ¬¡æ·±åº¦ä¼˜å…ˆæœç´¢ä¸­ï¼Œå½“å‰å·²ç»åˆ‡å¥½çš„å›æ–‡å­ä¸²ã€‚ä½¿ç”¨ `LinkedList` ä½œä¸º `Deque` å®ç°ï¼Œåœ¨å¤´å°¾å¢åˆ å…ƒç´ æ•ˆç‡æ›´é«˜ã€‚
    
- **`boolean[][] dp` (ä¼˜åŒ–)**: åœ¨åˆ¤æ–­å­ä¸²æ˜¯å¦ä¸ºå›æ–‡æ—¶ï¼Œå¦‚æœæ¯æ¬¡éƒ½ç”¨åŒæŒ‡é’ˆæ³•ï¼Œä¼šæœ‰å¤§é‡é‡å¤è®¡ç®—ã€‚æˆ‘ä»¬å¯ä»¥é¢„å…ˆç”¨**åŠ¨æ€è§„åˆ’**è®¡ç®—å‡ºæ‰€æœ‰ `s[i...j]` å­ä¸²æ˜¯å¦ä¸ºå›æ–‡ï¼Œå¹¶å­˜å…¥ä¸€ä¸ªäºŒç»´å¸ƒå°”æ•°ç»„ã€‚è¿™æ ·ï¼Œåç»­åˆ¤æ–­å›æ–‡çš„æ“ä½œå°±å˜æˆäº†O(1)çš„æŸ¥è¡¨æ“ä½œï¼Œå¯ä»¥æ˜¾è‘—ä¼˜åŒ–æ€§èƒ½ã€‚
    

---

## 3. Java ä»£ç å®ç°ä¸æ³¨é‡Š

è¿™æ˜¯ç»“åˆäº†**å›æº¯**å’Œ**åŠ¨æ€è§„åˆ’é¢„å¤„ç†**çš„ä¼˜åŒ–ç‰ˆä»£ç ã€‚

```java
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

class Solution {

    // æœ€ç»ˆç»“æœåˆ—è¡¨
    List<List<String>> result = new ArrayList<>();
    // ç”¨äºå­˜å‚¨å½“å‰è·¯å¾„ï¼ˆç»„åˆï¼‰çš„åˆ—è¡¨
    List<String> path = new ArrayList<>();
    // dpæ•°ç»„ç”¨äºè®°å¿†åŒ–æœç´¢ï¼Œdp[i][j]è¡¨ç¤ºs[i..j]æ˜¯å¦ä¸ºå›æ–‡ä¸²
    boolean[][] dp;

    public List<List<String>> partition(String s) {
        int n = s.length();
        // åˆå§‹åŒ–dpæ•°ç»„
        dp = new boolean[n][n];
        // é¢„å¤„ç†æ‰€æœ‰å­ä¸²æ˜¯å¦ä¸ºå›æ–‡
        // åŠ¨æ€è§„åˆ’å¡«å……dpè¡¨
        for (int j = 0; j < n; j++) {
            for (int i = 0; i <= j; i++) {
                // å¦‚æœiå’ŒjæŒ‡å‘çš„å­—ç¬¦ä¸åŒï¼Œs[i..j]è‚¯å®šä¸æ˜¯å›æ–‡
                if (s.charAt(i) == s.charAt(j)) {
                    // å¦‚æœå­ä¸²é•¿åº¦å°äºç­‰äº2ï¼Œæˆ–è€…å…¶å†…éƒ¨å­ä¸²s[i+1..j-1]æ˜¯å›æ–‡ï¼Œåˆ™s[i..j]æ˜¯å›æ–‡
                    if (j - i <= 1 || dp[i + 1][j - 1]) {
                        dp[i][j] = true;
                    }
                }
            }
        }

        // ä»ç´¢å¼•0å¼€å§‹è¿›è¡Œå›æº¯æœç´¢
        backtrack(s, 0);
        return result;
    }

    /**
     * å›æº¯å‡½æ•°
     * @param s          åŸå§‹å­—ç¬¦ä¸²
     * @param startIndex å½“å‰åˆ‡å‰²çš„èµ·å§‹ä½ç½®
     */
    public void backtrack(String s, int startIndex) {
        // --- é€’å½’ç»ˆæ­¢æ¡ä»¶ ---
        // å¦‚æœèµ·å§‹ä½ç½®å·²ç»è¶Šè¿‡äº†å­—ç¬¦ä¸²æœ«å°¾ï¼Œè¯´æ˜æ‰¾åˆ°äº†ä¸€ç»„å®Œæ•´çš„åˆ†å‰²æ–¹æ¡ˆ
        if (startIndex >= s.length()) {
            // å°†å½“å‰è·¯å¾„çš„å‰¯æœ¬åŠ å…¥åˆ°ç»“æœé›†ä¸­
            result.add(new ArrayList<>(path));
            return;
        }

        // --- éå†æ‰€æœ‰å¯èƒ½çš„åˆ‡å‰²ç‚¹ ---
        // i æ˜¯å½“å‰è¿™ä¸€åˆ€è¦åˆ‡ä¸‹å»çš„ä½ç½®ï¼ˆå­ä¸²çš„æœ«å°¾ï¼‰
        for (int i = startIndex; i < s.length(); i++) {
            // æ£€æŸ¥ä»startIndexåˆ°içš„å­ä¸² s[startIndex...i] æ˜¯å¦æ˜¯å›æ–‡
            // é€šè¿‡æŸ¥é¢„å¤„ç†å¥½çš„dpè¡¨ï¼ŒO(1)æ—¶é—´å¤æ‚åº¦
            if (dp[startIndex][i]) {
                // å¦‚æœæ˜¯å›æ–‡ä¸²ï¼Œåˆ™è¿™æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„â€œé€‰æ‹©â€
                String sub = s.substring(startIndex, i + 1);
                
                // --- åšé€‰æ‹© ---
                path.add(sub);
                
                // --- è¿›å…¥ä¸‹ä¸€å±‚é€’å½’ ---
                // ä¸‹ä¸€æ¬¡åˆ‡å‰²çš„èµ·å§‹ä½ç½®ä» i + 1 å¼€å§‹
                backtrack(s, i + 1);
                
                // --- æ’¤é”€é€‰æ‹©ï¼ˆå›æº¯ï¼‰ ---
                // å°†åˆšåˆšåŠ å…¥çš„å­ä¸²ç§»é™¤ï¼Œå›åˆ°ä¸Šä¸€å±‚çŠ¶æ€ï¼Œå»å°è¯•å…¶ä»–çš„åˆ‡å‰²æ–¹æ¡ˆ
                path.remove(path.size() - 1);
            }
            // å¦‚æœ s[startIndex...i] ä¸æ˜¯å›æ–‡ï¼Œåˆ™è¿™æ¬¡åˆ‡å‰²æ— æ•ˆï¼Œç›´æ¥å‰ªæï¼Œç»§ç»­å°è¯•æ›´é•¿çš„å­ä¸²ï¼ˆi++ï¼‰
        }
    }
}
```

---

## 4. å¤æ‚åº¦åˆ†æ

- **æ—¶é—´å¤æ‚åº¦ï¼šO(N * 2^N)**
    
    - åŠ¨æ€è§„åˆ’é¢„å¤„ç† `dp` æ•°ç»„çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(NÂ²)ã€‚
        
    - å›æº¯éƒ¨åˆ†ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚å­—ç¬¦ä¸²æ˜¯ "aaaaa"ï¼‰ï¼Œæ¯ä¸ªä½ç½®éƒ½å¯ä»¥é€‰æ‹©åˆ‡æˆ–è€…ä¸åˆ‡ï¼Œä¼šäº§ç”Ÿ 2^(N-1) ç§åˆ†å‰²æ–¹æ³•ï¼Œæ¯ç§æ–¹æ³•éƒ½éœ€è¦ O(N) çš„æ—¶é—´æ¥æ„å»ºã€‚æ‰€ä»¥å¤æ‚åº¦æ˜¯æŒ‡æ•°çº§çš„ã€‚`O(N * 2^N)` æ˜¯ä¸€ä¸ªæ¯”è¾ƒå®½æ¾çš„ä¸Šç•Œã€‚
        
- **ç©ºé—´å¤æ‚åº¦ï¼šO(NÂ²)**
    
    - `dp` æ•°ç»„å ç”¨äº† O(NÂ²) çš„ç©ºé—´ã€‚
        
    - é€’å½’è°ƒç”¨æ ˆçš„æ·±åº¦æœ€å¤šä¸º Nã€‚
        
    - å› æ­¤ï¼Œç©ºé—´å¤æ‚åº¦ä¸»è¦ç”± `dp` æ•°ç»„å†³å®šã€‚
        

---

## 5. è§¦ç±»æ—é€šï¼šå›æº¯æ€æƒ³çš„â€œå…¨å®¶æ¡¶â€

æŒæ¡äº†è¿™ç§â€œåˆ‡å‰²â€å‹çš„å›æº¯æ¨¡æ¿ï¼Œä½ å¯ä»¥å»æŒ‘æˆ˜ç±»ä¼¼çš„é—®é¢˜ï¼š

- **[[93. å¤åŸ IP åœ°å€]]**: ä¹Ÿæ˜¯åˆ‡å‰²å­—ç¬¦ä¸²ï¼Œä½†æ¯æ¬¡åˆ‡å‰²çš„å­ä¸²éœ€è¦æ»¡è¶³IPåœ°å€æ®µçš„è§„åˆ™ã€‚
    
- **[[132. åˆ†å‰²å›æ–‡ä¸² II]]**: åŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œè¦æ±‚æœ€å°‘çš„åˆ†å‰²æ¬¡æ•°ï¼Œå¯ä»¥å€Ÿé‰´æœ¬é¢˜åˆ¤æ–­å›æ–‡çš„`dp`æ€æƒ³ã€‚
    
- **[[39. ç»„åˆæ€»å’Œ]]**: ä¹‹å‰æˆ‘ä»¬è®¨è®ºè¿‡çš„ç»å…¸ç»„åˆå›æº¯é—®é¢˜ï¼Œå¯ä»¥å¯¹æ¯”ä¸€ä¸‹â€œç»„åˆâ€å’Œâ€œåˆ‡å‰²â€åœ¨å›æº¯å®ç°ä¸Šçš„å¼‚åŒã€‚
    

å¸Œæœ›è¿™ä»½è¯¦ç»†çš„é¢˜è§£èƒ½å¸®ä½ å½»åº•æ‰«æ¸…å›°æƒ‘ï¼å›æº¯ç®—æ³•çš„ç²¾é«“å°±åœ¨äºâ€œé€‰æ‹©â€å’Œâ€œæ’¤é”€â€ï¼Œå¤šç»ƒä¹ å‡ é“é¢˜ï¼Œä½ å°±èƒ½è¿ç”¨è‡ªå¦‚äº†ã€‚

# é€æ­¥ä¼˜åŒ–è‡ªå·±çš„ä»£ç 
å½“ç„¶å¯ä»¥ï¼ä½ å·²ç»è¿ˆå‡ºäº†æœ€é‡è¦çš„ä¸€æ­¥â€”â€”å†™å‡ºäº†è‡ªå·±çš„å›æœ­ä»£ç ã€‚ç°åœ¨ä»£ç æ— æ³•é€šè¿‡ï¼Œæ­£æ˜¯æˆ‘ä»¬æ·±å…¥ç†è§£ç®—æ³•ã€å°†ç†è®ºè½¬åŒ–ä¸ºæ­£ç¡®å®è·µçš„ç»ä½³æœºä¼šã€‚

æˆ‘ä»¬æ¥æ‰®æ¼”ä¸€æ¬¡â€œä»£ç é‡æ„å¸ˆâ€ï¼Œä¸€æ­¥ä¸€æ­¥åœ°å°†ä½ çš„ä»£ç ä¼˜åŒ–æˆæœ€ç»ˆçš„æ­£ç¡®ç‰ˆæœ¬ï¼Œå¹¶åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è§£å†³ä½ æåˆ°çš„æ‰€æœ‰å›°æƒ‘ã€‚

### é—®é¢˜å›é¡¾ï¼šä½ çš„ä»£ç å­˜åœ¨çš„ä¸‰å¤§é—®é¢˜

1. **åˆ‡å‰²ç‚¹çš„æ··æ·†**ï¼šä½ çš„ä»£ç é€»è¾‘åœ¨ç”Ÿæˆ**å­åºåˆ—**ï¼Œè€Œé**åˆ‡å‰²**å­—ç¬¦ä¸²ã€‚
    
2. **å›æº¯é€»è¾‘çš„é”™ä½**ï¼š`res.add(...)` çš„ä½ç½®ä¸æ­£ç¡®ï¼Œå¯¼è‡´æ·»åŠ äº†è®¸å¤šä¸­é—´ç»“æœã€‚
    
3. **ç»ˆæ­¢æ¡ä»¶çš„åˆ¤æ–­**ï¼šåœ¨é”™è¯¯çš„æ—¶åˆ»ï¼Œå¯¹é”™è¯¯çš„å¯¹è±¡ï¼ˆä¸€ä¸ªå­åºåˆ—`path`ï¼‰è¿›è¡Œäº†å›æ–‡åˆ¤æ–­ã€‚
    

ç°åœ¨ï¼Œæˆ‘ä»¬å¼€å§‹åŠ¨æ‰‹æœ¯ï¼

---

### ä»£ç ä¼˜åŒ–ä¹‹æ—…ï¼šä¸€æ­¥æ­¥èµ°å‘æ­£ç¡®
å¥½çš„ï¼Œå®Œå…¨ç†è§£ã€‚ä½ æƒ³çœ‹ä¸€ä¸ªæ›´èšç„¦ã€æ›´ç»†è‡´çš„â€œä»£ç æ”¹é€ â€è¿‡ç¨‹ï¼Œå³å¦‚ä½•ä»ä½ æœ€åˆçš„ã€æœ‰é—®é¢˜çš„ä»£ç å‡ºå‘ï¼Œé€šè¿‡ä¸€æ­¥æ­¥ç²¾å‡†çš„ä¿®æ”¹ï¼Œæœ€ç»ˆæ¼”å˜æˆæ­£ç¡®ä¸”é«˜æ•ˆçš„ç­”æ¡ˆã€‚

æˆ‘ä»¬ç°åœ¨å°±æ¥å½“ä¸€æ¬¡â€œä»£ç å¤–ç§‘åŒ»ç”Ÿâ€ï¼Œå¯¹ä½ æœ€åˆçš„ç¨‹åºè¿›è¡Œä¸€åœºç²¾å¯†çš„â€œæ‰‹æœ¯â€ã€‚

---

# ğŸš€ ä»£ç é‡æ„ä¹‹æ—…ï¼šä»å­åºåˆ—åˆ°å›æ–‡åˆ†å‰²

> [!NOTE] æˆ‘ä»¬çš„èµ·ç‚¹
> 
> æˆ‘ä»¬ä»ä½ æœ€åˆçš„ä»£ç å¼€å§‹ã€‚å®ƒçš„æ ¸å¿ƒé—®é¢˜æ˜¯æ··æ·†äº†â€œç”Ÿæˆå­åºåˆ—â€å’Œâ€œå­—ç¬¦ä¸²åˆ†å‰²â€çš„æ¨¡å‹ã€‚

**åˆå§‹ä»£ç  (å­˜åœ¨é—®é¢˜çš„ç‰ˆæœ¬):**

Java

```
public void backtrack(String s, int index, List<String> list, StringBuilder path){
    if(index == s.length()){
        if(huiwen(path.toString()) && path != null && path.length() != 0){
            list.add(path.toString());
        }
        return;
    }
    // â€œé€‰æ‹©â€å½“å‰å­—ç¬¦
    path.append(s.charAt(index));
    backtrack(s, index + 1, list, path);
    path.deleteCharAt(path.length() - 1); // æ’¤é”€é€‰æ‹©
    // â€œä¸é€‰æ‹©â€å½“å‰å­—ç¬¦
    backtrack(s, index + 1, list, path);
    // é”™è¯¯çš„ä½ç½®æ·»åŠ ç»“æœ
    res.add(new ArrayList<>(list));
}
```

---

### ç¬¬ä¸€ç«™ï¼šä¿®æ­£æ ¸å¿ƒæ¨¡å‹ - ä»â€œé€‰å­—ç¬¦â€åˆ°â€œåˆ‡å­—ç¬¦ä¸²â€

> [!DANGER] é—®é¢˜æ ¹æº
> 
> å½“å‰çš„ backtrack å‡½æ•°åœ¨æ€è€ƒï¼šâ€œå¯¹äº s ä¸­çš„ç¬¬ index ä¸ªå­—ç¬¦ï¼Œæˆ‘åº”è¯¥é€‰è¿˜æ˜¯ä¸é€‰ï¼Ÿâ€
> 
> **æ­£ç¡®æ€è·¯**åº”è¯¥æ˜¯ï¼šâ€œå¯¹äºä» `startIndex` å¼€å§‹çš„å‰©ä½™å­—ç¬¦ä¸²ï¼Œæˆ‘çš„**ç¬¬ä¸€åˆ€**åº”è¯¥åˆ‡åœ¨å“ªé‡Œï¼Ÿâ€

æˆ‘ä»¬éœ€è¦å½»åº•æ”¹å˜ `backtrack` å‡½æ•°çš„å†…éƒ¨ç»“æ„ï¼Œç”¨ä¸€ä¸ª `for` å¾ªç¯æ¥ä»£è¡¨æ‰€æœ‰å¯èƒ½çš„â€œåˆ‡å‰²ç‚¹â€ã€‚

**ğŸ› ï¸ æ‰‹æœ¯æ“ä½œï¼š**

1. ä¿®æ”¹å‡½æ•°ç­¾åï¼Œä¸å†éœ€è¦ `StringBuilder path` å’Œ `List<String> list`ã€‚æ–°çš„ `path` å°†ä½œä¸ºæˆå‘˜å˜é‡ï¼Œå¹¶ä¸”æ˜¯ `List<String>` ç±»å‹ï¼Œç”¨äºå­˜æ”¾åˆ‡å‰²å‡ºçš„å›æ–‡ä¸²ã€‚
    
2. å°†å‡½æ•°ä½“å†…çš„â€œé€‰/ä¸é€‰â€é€»è¾‘ï¼Œæ›¿æ¢ä¸ºä¸€ä¸ª `for` å¾ªç¯ï¼Œè¯¥å¾ªç¯ç”¨äºéå†æ‰€æœ‰å¯èƒ½çš„åˆ‡å‰²ç»ˆç‚¹ã€‚
    

**ä»£ç æ¼”å˜ (ç¬¬ä¸€ç‰ˆ - å»ºç«‹æ–°éª¨æ¶):**

Java

```
// æˆå‘˜å˜é‡ - pathç°åœ¨ç”¨æ¥å­˜å­—ç¬¦ä¸²ç‰‡æ®µ
List<String> path = new ArrayList<>();

public void backtrack(String s, int startIndex) {
    // ç»ˆæ­¢æ¡ä»¶ï¼ˆä¸‹ä¸€æ­¥å®Œå–„ï¼‰
    
    // æ ¸å¿ƒæ”¹é€ ï¼šç”¨ for å¾ªç¯æ¥æ¨¡æ‹Ÿæ‰€æœ‰å¯èƒ½çš„â€œåˆ‡æ³•â€
    // i ä»£è¡¨æˆ‘ä»¬å°è¯•åˆ‡å‰²çš„å­ä¸²çš„ç»“æŸä½ç½®
    for (int i = startIndex; i < s.length(); i++) {
        // åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°è¯•åˆ‡å‡ºå­ä¸² s[startIndex...i]
        
        // 1. åšé€‰æ‹© (Choose)
        
        // 2. æ¢ç´¢ (Explore)
        
        // 3. æ’¤é”€é€‰æ‹© (Un-choose)
    }
}
```

**âœ¨ é˜¶æ®µæ€§æˆæœ**ï¼šæˆ‘ä»¬å·²ç»å°†ç®—æ³•çš„æ ¸å¿ƒä»ä¸€ä¸ªé”™è¯¯çš„æ¨¡å‹ï¼ˆå­åºåˆ—ï¼‰åˆ‡æ¢åˆ°äº†æ­£ç¡®çš„æ¨¡å‹ï¼ˆåˆ†å‰²ï¼‰ã€‚

---

### ç¬¬äºŒç«™ï¼šå®šä½â€œæˆåŠŸæ—¶åˆ»â€ - ä¿®æ­£ç»ˆæ­¢æ¡ä»¶

> [!DANGER] é—®é¢˜æ ¹æº
> 
> ä½ çš„ä»£ç åœ¨ index == s.length() æ—¶ï¼Œå¯¹ä¸€ä¸ªä¸´æ—¶çš„ã€ä¸å®Œæ•´çš„ path è¿›è¡Œåˆ¤æ–­ï¼Œå¹¶ä¸”åœ¨é”™è¯¯çš„åœ°æ–¹ res.add()ã€‚
> 
> **æ­£ç¡®æ€è·¯**æ˜¯ï¼šåªæœ‰å½“æˆ‘ä»¬æˆåŠŸåœ°å°†**æ•´ä¸ªå­—ç¬¦ä¸²**ä»å¤´åˆ°å°¾åˆ†å‰²å®Œæ¯•æ—¶ï¼Œæ‰ç®—æ‰¾åˆ°äº†ä¸€ä¸ªè§£ã€‚

**ğŸ› ï¸ æ‰‹æœ¯æ“ä½œï¼š**

1. å®šä¹‰æˆåŠŸæ¡ä»¶ï¼šå½“åˆ‡å‰²çš„èµ·å§‹ç‚¹ `startIndex` è¶Šè¿‡æˆ–ç­‰äºå­—ç¬¦ä¸²çš„é•¿åº¦æ—¶ï¼Œæ„å‘³ç€ `[0...s.length()-1]` çš„éƒ¨åˆ†éƒ½å·²ç»è¢«æˆåŠŸåˆ‡å‰²å¹¶æ”¾å…¥ `path` ä¸­ã€‚
    
2. å°† `res.add()` æ“ä½œç§»åŠ¨åˆ°è¿™ä¸ªå”¯ä¸€çš„æˆåŠŸæ—¶åˆ»ã€‚
    

**ä»£ç æ¼”å˜ (ç¬¬äºŒç‰ˆ - æ˜ç¡®ç»ˆç‚¹):**

Java

```java
public void backtrack(String s, int startIndex) {
    // --- æ­£ç¡®çš„ç»ˆæ­¢æ¡ä»¶ ---
    if (startIndex >= s.length()) {
        // æ­¤åˆ»ï¼Œpath ä¸­å­˜æ”¾çš„æ˜¯ä¸€ä¸ªå®Œæ•´çš„ã€æœ‰æ•ˆçš„åˆ†å‰²æ–¹æ¡ˆ
        // å°†è¿™ä¸ªæ–¹æ¡ˆçš„â€œå¿«ç…§â€åŠ å…¥æœ€ç»ˆç»“æœé›†
        result.add(new ArrayList<>(path));
        return;
    }

    for (int i = startIndex; i < s.length(); i++) {
        // ... åˆ‡å‰²é€»è¾‘ ...
    }
}
```

**âœ¨ é˜¶æ®µæ€§æˆæœ**ï¼šæˆ‘ä»¬ç°åœ¨æœ‰äº†ä¸€ä¸ªæ˜ç¡®çš„ç›®æ ‡ç»ˆç‚¹ï¼Œå¹¶ä¸”åªä¼šåœ¨åˆ°è¾¾ç»ˆç‚¹æ—¶æ‰ä¿å­˜ç»“æœï¼Œè§£å†³äº†é€»è¾‘é”™ä½å’Œç»“æœæ±¡æŸ“çš„é—®é¢˜ã€‚

---

### ç¬¬ä¸‰ç«™ï¼šæ•´åˆâ€œèµ„æ ¼å®¡æŸ¥â€ - åœ¨æ­£ç¡®çš„ä½ç½®åˆ¤æ–­å›æ–‡

> [!DANGER] é—®é¢˜æ ¹æº
> 
> ä½ çš„ä»£ç æ˜¯åœ¨æœ€åå¯¹ä¸€ä¸ªå­åºåˆ—è¿›è¡Œå›æ–‡åˆ¤æ–­ã€‚
> 
> **æ­£ç¡®æ€è·¯**æ˜¯ï¼šå›æ–‡åˆ¤æ–­æ˜¯æˆ‘ä»¬**æ¯åˆ‡ä¸€åˆ€å‰**çš„â€œé€šè¡Œè¯â€ã€‚å¦‚æœåˆ‡å‡ºæ¥çš„éƒ¨åˆ†ä¸æ˜¯å›æ–‡ï¼Œé‚£ä¹ˆè¿™æ¡è·¯å°±æ²¡å¿…è¦å†èµ°ä¸‹å»äº†ï¼ˆè¿™å«â€œå‰ªæâ€ï¼‰ã€‚

**ğŸ› ï¸ æ‰‹æœ¯æ“ä½œï¼š**

1. åœ¨ `for` å¾ªç¯å†…éƒ¨ï¼Œè·å–å½“å‰å°è¯•åˆ‡å‰²çš„å­ä¸² `s[startIndex...i]`ã€‚
    
2. **ç«‹å³**ç”¨ `isPalindrome` å‡½æ•°æ£€æŸ¥è¿™ä¸ªå­ä¸²ã€‚
    
3. åªæœ‰å½“æ£€æŸ¥é€šè¿‡æ—¶ï¼Œæ‰æ‰§è¡Œâ€œé€‰æ‹© -> æ¢ç´¢ -> æ’¤é”€â€ä¸‰éƒ¨æ›²ã€‚
    

**ä»£ç æ¼”å˜ (æœ€ç»ˆç‰ˆ - é€»è¾‘å®Œæ•´):**

Java

```java
private void backtrack(String s, int startIndex) {
    if (startIndex >= s.length()) {
        result.add(new ArrayList<>(path));
        return;
    }

    for (int i = startIndex; i < s.length(); i++) {
        // 1. è·å–å½“å‰å°è¯•åˆ‡å‰²çš„å­ä¸²
        String sub = s.substring(startIndex, i + 1);

        // 2. â€œèµ„æ ¼å®¡æŸ¥â€ï¼šåˆ¤æ–­å®ƒæ˜¯å¦ä¸ºå›æ–‡
        if (isPalindrome(sub)) { // ä½¿ç”¨ä¸€ä¸ªåˆ¤æ–­å›æ–‡çš„è¾…åŠ©å‡½æ•°
            
            // --- å®¡æŸ¥é€šè¿‡ï¼Œæ‰§è¡Œå›æº¯ä¸‰éƒ¨æ›² ---
            
            // 2.1 åšé€‰æ‹© (Choose)
            path.add(sub);
            
            // 2.2 æ¢ç´¢ (Explore) - ä»ä¸‹ä¸€ä¸ªä½ç½® i + 1 ç»§ç»­åˆ‡å‰²
            backtrack(s, i + 1);
            
            // 2.3 æ’¤é”€é€‰æ‹© (Un-choose) - å›æº¯ï¼Œä¸º for å¾ªç¯çš„ä¸‹ä¸€æ¬¡å°è¯•åšå‡†å¤‡
            path.remove(path.size() - 1);
        }
        // å¦‚æœä¸æ˜¯å›æ–‡ï¼Œforå¾ªç¯ä¼šç»§ç»­ï¼Œi++ï¼Œå°è¯•ä¸€ä¸ªæ›´é•¿çš„å­ä¸²
    }
}

// (ä½ çš„ huiwen æ–¹æ³•å¯ä»¥å¤ç”¨ï¼Œç¨ä½œä¿®æ”¹å³å¯)
private boolean isPalindrome(String str) {
    int i = 0, j = str.length() - 1;
    while (i < j) {
        if (str.charAt(i++) != str.charAt(j--)) {
            return false;
        }
    }
    return true;
}
```

### æ€»ç»“ï¼šæ‰‹æœ¯æˆåŠŸï¼

> [!SUCCESS] é‡æ„å®Œæˆ
> 
> æˆ‘ä»¬é€šè¿‡ä¸‰æ­¥ç²¾å‡†çš„æ‰‹æœ¯ï¼Œå°†ä½ æœ€åˆçš„â€œå­åºåˆ—â€ä»£ç ï¼ŒæˆåŠŸé‡æ„ä¸ºäº†ä¸€ä¸ªé€»è¾‘æ¸…æ™°ã€æ­£ç¡®æ— è¯¯çš„â€œåˆ†å‰²â€é—®é¢˜å›æº¯æ¨¡æ¿ã€‚

